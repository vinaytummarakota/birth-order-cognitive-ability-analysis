+ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_8_mathematics_knowledge
speed =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tech =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vm + speed + tech
'
ree_and_caretta_fit <- cfa(
data = df,
model = lavmodel,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
summary(ree_and_caretta_fit)
fitMeasures(ree_and_caretta_fit, "cfi")
semPaths(ree_and_caretta_fit, whatLabels = 'par')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lavaan)
library(semPlot)
library(sirt)
df <- read.csv("../01_clean_data/cleaned_nlsy79_data.csv")
lavmodel <- '
vc =~ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_1_general_science
ar =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_8_mathematics_knowledge
ps =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tk =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ v + m + s + t
'
deary_et_al_fit <- cfa(
data = df,
model = lavmodel,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
lavmodel <- '
vc =~ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_1_general_science
ar =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_8_mathematics_knowledge
ps =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tk =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vc + ar + ps + tk
'
deary_et_al_fit <- cfa(
data = df,
model = lavmodel,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
summary(deary_et_al_fit)
fitMeasures(deary_et_al_fit, "cfi")
semPaths(deary_et_al_fit, whatLabels = 'par')
ree_and_caretta_model <- '
vm =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_8_mathematics_knowledge
speed =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tech =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vm + speed + tech
'
ree_and_caretta_fit <- cfa(
data = df,
model = ree_and_caretta_model,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
fitMeasures(ree_and_caretta_fit, "cfi")
semPaths(ree_and_caretta_fit, whatLabels = 'par')
modindices(ree_and_caretta_fit)
modindices(ree_and_caretta_fit, sort = TRUE)
modindices(ree_and_caretta_fit, sort = TRUE)
modindices(ree_and_caretta_fit, sort = TRUE, maximum.number = 5)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lavaan)
library(semPlot)
library(sirt)
df <- read.csv("../01_clean_data/cleaned_nlsy79_data.csv")
ree_and_caretta_model <- '
vm =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_8_mathematics_knowledge
speed =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tech =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vm + speed + tech
'
ree_and_caretta_fit <- cfa(
data = df,
model = ree_and_caretta_model,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
fitMeasures(ree_and_caretta_fit, "cfi")
semPaths(ree_and_caretta_fit, whatLabels = 'par')
modindices(ree_and_caretta_fit, sort = TRUE, maximum.number = 5)
modindices(ree_and_caretta_fit)
modindices(ree_and_caretta_fit) %>%
arrange(mi)
modindices(ree_and_caretta_fit) %>%
arrange(mi)
modindices(ree_and_caretta_fit)
df <- modindices(ree_and_caretta_fit)
ree_and_caretta_modindces <- modindices(ree_and_caretta_fit)
ree_and_caretta_modindces <- modindices(ree_and_caretta_fit, sort = TRUE)
ree_and_caretta_modindces
print(ree_and_caretta_modindices)
ree_and_caretta_modindices <- modindices(ree_and_caretta_fit, sort = TRUE)
print(ree_and_caretta_modindices)
View(ree_and_caretta_modindices)
deary_et_al_model <- '
vc =~ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_1_general_science
ar =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_8_mathematics_knowledge
ps =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tk =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vc + ar + ps + tk
'
deary_et_al_fit <- cfa(
data = df,
model = deary_et_al_model,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lavaan)
library(semPlot)
library(sirt)
df <- read.csv("../01_clean_data/cleaned_nlsy79_data.csv")
deary_et_al_model <- '
vc =~ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_1_general_science
ar =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_8_mathematics_knowledge
ps =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tk =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vc + ar + ps + tk
'
deary_et_al_fit <- cfa(
data = df,
model = deary_et_al_model,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
fitMeasures(deary_et_al_fit, "cfi")
semPaths(deary_et_al_fit, whatLabels = 'par')
deary_et_al_modindices <- modindices(deary_et_al_fit, sort = TRUE, maximum.number = 5)
View(deary_et_al_modindices)
ree_and_caretta_model <- '
vm =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_8_mathematics_knowledge
speed =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tech =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vm + speed + tech
'
ree_and_caretta_fit <- cfa(
data = df,
model = ree_and_caretta_model,
sampling.weights = "sampling_weight",
orthogonal = TRUE
)
fitMeasures(ree_and_caretta_fit, "cfi")
semPaths(ree_and_caretta_fit, whatLabels = 'par')
ree_and_caretta_modindices <- modindices(ree_and_caretta_fit, sort = TRUE, maximum.number = 5)
knitr::kable(head(ree_and_caretta_modindices))
moderator.grid <- seq(15,24,1)
local_sem <- sirt::lsem.estimate(
df,
moderator="age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
h=2
)
moderator.grid <- seq(15,24,1)
local_sem <- sirt::lsem.estimate(
df,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
h=2
)
local_sem
?lsem.estimate
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lavaan)
library(semPlot)
library(sirt)
df <- read.csv("../01_clean_data/cleaned_nlsy79_data.csv")
ree_and_caretta_model <- '
vm =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_8_mathematics_knowledge
speed =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tech =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vm + speed + tech
vm ~~ 0*speed
vm ~~ 0*tech
speed ~~ 0*tech
'
ree_and_caretta_fit <- cfa(
data = df,
model = ree_and_caretta_model,
sampling.weights = "sampling_weight"
)
fitMeasures(ree_and_caretta_fit, "cfi")
semPaths(ree_and_caretta_fit, whatLabels = 'par')
ree_and_caretta_modindices <- modindices(ree_and_caretta_fit, sort = TRUE, maximum.number = 5)
knitr::kable(head(ree_and_caretta_modindices))
deary_et_al_model <- '
vc =~ asvab_section_3_word_knowledge
+ asvab_section_4_paragraph_comprehension
+ asvab_section_1_general_science
ar =~ asvab_section_2_arithmetic_reasoning
+ asvab_section_8_mathematics_knowledge
ps =~ asvab_section_5_numerical_operations
+ asvab_section_6_coding_speed
tk =~ asvab_section_1_general_science
+ asvab_section_7_auto_and_shop_info
+ asvab_section_9_mechanical_comp
+ asvab_section_10_electronics_info
g =~ vc + ar + ps + tk
vc ~~ 0*ar
vc ~~ 0*ps
vc ~~ 0*tk
ar ~~ 0*ps
ar ~~ 0*tk
ps ~~ 0*tk
'
deary_et_al_fit <- cfa(
data = df,
model = deary_et_al_model,
sampling.weights = "sampling_weight"
)
fitMeasures(deary_et_al_fit, "cfi")
semPaths(deary_et_al_fit, whatLabels = 'par')
deary_et_al_modindices <- modindices(deary_et_al_fit, sort = TRUE, maximum.number = 5)
knitr::kable(head(deary_et_al_modindices))
?semPaths
moderator.grid <- seq(15,24,1)
local_sem <- lsem.estimate(
df,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi"),
sampling_weights = "sampling_weight"
)
?lsem.estimate
local_sem <- lsem.estimate(
df,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi"),
sampling_weights = df$sampling_weight
)
length(df)
nrow(df)
nrow(df$sampling_weight)
length(df$sampling_weight)
local_sem <- lsem.estimate(
data = df,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi"),
sampling_weights = df$sampling_weight
)
local_sem <- lsem.estimate(
data = df,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi"),
sampling_weights = df$sampling_weight,
missing = "fiml"
)
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi"),
sampling_weights = df$sampling_weight,
)
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi"),
sampling_weights = df$sampling_weight
)
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
local_sem <- lsem.estimate(
data = df,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
?lav_samplestats_icov
df2 <- df %>%
filter(!is.na(estimated_age))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
?as.matrix
as.matrix(df %>% select(starts_with("asvab")))
matrix_df <- as.matrix(df %>% select(starts_with("asvab")))
chol(matrix_df)
chol(cov(matrix_df))
cov(matrix_df)
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight))
matrix_df <- as.matrix(df2 %>% select(starts_with("asvab")))
cov(matrix_df)
View(df2)
matrix_df
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(across(starts_with("asvab"), ~ !is.na(.)))
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.)))
matrix_df <- as.matrix(df2 %>% select(starts_with("asvab")))
cov(matrix_df)
chol(cov(matrix_df))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
moderator.grid <- seq(15,24,1)
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.)))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
moderator.grid
moderator.grid <- seq(16,23,1)
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.)))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
summary(local_sem)
plot(local_sem, type="global")
?lsem.estimate
fitMeasures(local_sem)
summary(local_sem)
summary(local_sem)
View(summary(local_sem))
print(summary(local_sem))
summary(local_sem)
summary(local_sem)
local_sem$fit_measures
local_sem$dif_effects
local_sem$parameters_summary
local_sem$fitstats_joint
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
fit_measures = c("cfi")
)
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model
)
summary(local_sem)
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
sampling_weights = df2$sampling_weight
)
plot(local_sem, type="global")
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.))) %>%
filter(between(estimated_age, 16, 23))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
h = 2,
sampling_weights = df2$sampling_weight
)
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.))) %>%
filter(between(estimated_age, 17, 22))
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.))) %>%
filter(between(estimated_age, 16.5, 22.5))
moderator.grid <- seq(17,22,1)
df2 <- df %>%
filter(!is.na(estimated_age), !is.na(sampling_weight)) %>%
filter(if_all(starts_with("asvab"), ~ !is.na(.))) %>%
filter(between(estimated_age, 16.5, 22.5))
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
h = 2,
sampling_weights = df2$sampling_weight
)
plot(local_sem, type="global")
local_sem_bootstrap <- lsem.bootstrap(local_sem, R = 200)
local_sem_bootstrap <- lsem.bootstrap(local_sem, R = 1)
summary(local_sem_bootstrap)
?fitMeasures
sirt::lsem.permutationTest(local_sem, B=10)
test <- lsem.permutationTest(local_sem, B=10)
summary(test)
View(summary(test))
# plot(local_sem, type="global")
summary(test)
summary(test)
summary(local_sem)
summary(test)
local_sem <- lsem.estimate(
data = df2,
moderator="estimated_age",
moderator.grid=moderator.grid,
lavmodel=deary_et_al_model,
h = 2,
sampling_weights = df2$sampling_weight
)
plot(local_sem, type="global")
